From d31c7fa681b53f477dc3415b72cf85d15df49b2f Mon Sep 17 00:00:00 2001
From: Adam Kocoloski <kocolosk@apache.org>
Date: Sun, 11 Jul 2010 01:00:50 +0000
Subject: [PATCH 08/13] deleting a DB while it was being opened would crash
 couch_server

git-svn-id: https://svn.apache.org/repos/asf/couchdb/trunk@962964 13f79535-47bb-0310-9956-ffa450edef68
---
 src/couchdb/couch_server.erl |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/src/couchdb/couch_server.erl b/src/couchdb/couch_server.erl
index 43fd904..88bd610 100644
--- a/src/couchdb/couch_server.erl
+++ b/src/couchdb/couch_server.erl
@@ -326,7 +326,7 @@ handle_call({delete, DbName, _Options}, _From, Server) ->
             couch_util:shutdown_sync(Pid),
             true = ets:delete(couch_dbs_by_name, DbName),
             true = ets:delete(couch_dbs_by_pid, Pid),
-            [gen_server:send_result(F, not_found) || F <- Froms],
+            [gen_server:reply(F, not_found) || F <- Froms],
             true;
         [{_, {opened, Pid, LruTime}}] ->
             couch_util:shutdown_sync(Pid),
-- 
1.7.5.1

